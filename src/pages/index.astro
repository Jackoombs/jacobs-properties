---
import Link from "../components/General/Link";
import Layout from "../layouts/HomeLayout.astro";
import HomeHeader from "../components/Header/HomeHeader";
import Banner from "../components/Home/Banner/Banner";
import PropertySearchBar from "../components/General/PropertySearchBar";
import Home1 from "../assets/images/home_1.webp";
import Home2 from "../assets/images/home_2.webp";
import Home3 from "../assets/images/home_3.webp";
import SectionLabel from "../components/General/Text/SectionLabel";
import SectionHeader from "../components/General/Text/SectionHeader";
import Copy from "../components/General/Text/Copy";
import HowCanWeHelp from "../components/Home/HowCanWeHelp";
import Video from "../components/General/Video";
import RecentlySoldLet from "../components/Home/RecentlySoldLet";
import Thumbnail from "../assets/images/thumbnail.webp";
import BrochureForm from "../components/Home/BrochureForm";
import Reviews from "../components/Home/Reviews";
import FAQs from "../components/Home/FAQs";
import Display from "../components/General/Text/Display";
---

<Layout title="Welcome to Jacobs Properties.">
  <HomeHeader client:load />
  <main>
    <Banner client:load />
    <section
      class="justify-center bg-primary-200 py-10 md:flex md:pb-40 md:pt-28"
    >
      <div
        class="mx-auto flex max-w-container-lg flex-col items-center gap-[34px]"
      >
        <Display text="Your property search starts here." />
        <PropertySearchBar client:visible />
      </div>
    </section>

    <section class="bg-white py-10 md:py-28">
      <div
        class="mx-auto grid max-w-container-lg gap-12 lg:grid-cols-2 lg:gap-7"
      >
        <img
          loading="lazy"
          class="h-auto w-full justify-self-end rounded-big object-cover md:aspect-hero lg:order-1"
          src={Home1.src}
          alt="St Michael's Church Basingstoke"
        />
        <div class="flex flex-col md:max-w-xl md:justify-center">
          <SectionLabel text="About" padding="hero-md" />
          <SectionHeader text="People first. Property second" padding="hero" />
          <Copy
            size="md"
            text="Meet Team Jacobs. We're a friendly bunch of property experts who put people first. Since 1999, we've been helping the people of Basingstoke get on the property ladder, find their forever home, sell up and move on, downsize, upsize, rightsize - whatever your property needs we've got your back."
            addClasses="lg:pb-7"
          />
          <Link
            classes="hidden lg:flex"
            text="Meet the Team"
            link="/"
            type="secondary"
            size="lg"
          />
        </div>
      </div>
    </section>

    <section class="overflow-hidden bg-primary-200 py-10 md:py-28">
      <div class="mx-auto max-w-container-lg">
        <HowCanWeHelp client:idle />
      </div>
    </section>

    <section class="bg-white py-10 md:py-28">
      <div
        id="targetTake"
        class="mx-auto flex h-auto max-w-container-lg flex-col gap-9 md:items-center md:gap-16"
      >
        <SectionHeader
          addClasses="max-w-[17rem] sm:max-w-none"
          text="Let's put some faces to our names"
        />
        <Video
          videoId="dQw4w9WgXcQ"
          thumbnailPath={Thumbnail.src}
          origin={Astro.url}
          client:visible
        />
      </div>
    </section>

    <section
      class="relative flex flex-col gap-12 bg-secondary-100 pb-10 md:pb-28 lg:flex-row lg:gap-7 lg:pb-0"
    >
      <img
        loading="lazy"
        class="aspect-[6/5] h-auto w-full flex-1 object-cover object-left lg:order-1 lg:w-[50vw]"
        src={Home2.src}
        alt=""
      />
      <div
        id="targetGive"
        class="flex max-w-container-lg flex-1 gap-8 lg:py-10 xl:py-28"
      >
        <div class="flex flex-1 flex-col pr-3 lg:justify-center">
          <SectionLabel text="Valuation" padding="hero-md" />
          <SectionHeader
            addClasses="lg:max-w-lg"
            text="Find out how much your property is worth"
            padding="hero"
          />
          <Copy
            addClasses="max-w-xl"
            padding="hero-md"
            size="md"
            text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dolor lorem, eleifend pharetra nibh ut, blandit placerat massa. Mauris maximus ligula placerat ligula viverra gravida. Cras sed neque vitae tortor varius accumsan. Nunc accumsan ex in commodo viverra."
          />
          <div class="flex flex-col gap-3 md:flex-row">
            <Link text="Instant Valuation" link="/" type="white" size="lg" />
            <Link text="Expert Valuation" link="/" type="primary" size="lg" />
          </div>
        </div>
      </div>
    </section>

    <section class="overflow-hidden bg-white py-10 md:py-28">
      <div class="mx-auto max-w-container-lg">
        <RecentlySoldLet client:idle />
      </div>
    </section>

    <section
      class="relative flex flex-col gap-12 bg-primary-200 pb-10 md:pb-28 lg:flex-row lg:gap-0 lg:py-28"
    >
      <img
        loading="lazy"
        class="aspect-5/4 h-auto w-full flex-1 object-cover object-left lg:order-1 lg:hidden lg:w-[50vw]"
        src={Home3.src}
        alt=""
      />
      <div class="mx-auto grid max-w-container-lg gap-7 lg:grid-cols-2">
        <div>
          <div class="flex flex-col lg:max-w-xl lg:justify-center">
            <SectionLabel addClasses="pb-3" text="Sales Brochure" />
            <SectionHeader
              addClasses="pb-4"
              text="First time selling a property?"
            />
            <Copy
              addClasses="pb-5"
              size="md"
              text="We understand how daunting it can be. That's why we've compiled a FREE guide of pro tips to help make your experience as stress-free as possible."
            />
            <BrochureForm client:visible />
          </div>
        </div>
        <img
          loading="lazy"
          class="hidden aspect-[1.42_/_1] h-auto w-full flex-1 self-center rounded-big object-cover object-left lg:order-1 lg:inline"
          src={Home3.src}
          alt=""
        />
      </div>
    </section>

    <section class="bg-white py-10 md:items-center md:py-28">
      <div class="mx-auto flex max-w-container-lg flex-col">
        <SectionHeader
          addClasses="md:text-center"
          text="Hear from our customers"
          padding="misc"
        />
        <Reviews client:visible />
      </div>
    </section>

    <section
      class="bg-primary-200 py-14 md:items-center md:gap-16 md:py-section"
    >
      <div
        class="mx-auto flex max-w-container-lg flex-col gap-8 md:justify-center md:gap-16"
      >
        <SectionHeader
          text="Frequently asked questions"
          addClasses="md:text-center"
        />
        <FAQs client:visible />
        <a
          class="text-xs font-semibold uppercase tracking-[1.2px] text-primary-100 underline decoration-secondary-100 decoration-2 underline-offset-4 lg:text-center lg:text-[0.875rem] lg:underline-offset-8"
          href="/">See All Our Faqs</a
        >
      </div>
    </section>
  </main>
</Layout>

<script>
  const updateMargin = () => {
    const divToTake = document.querySelector("#targetTake");
    const divMargin = window.getComputedStyle(divToTake!);
    updateDiv(divMargin.marginLeft);
  };

  const updateDiv = (divMargin: string) => {
    (<HTMLElement>document.querySelector("#targetGive")).style.marginLeft =
      divMargin;
  };

  updateMargin();
  window.addEventListener("resize", updateMargin);
</script>
