---
import Link from "../components/General/Link";
import Layout from "../layouts/HomeLayout.astro";
import HomeHeader from "../components/Header/HomeHeader";
import Banner from "../components/Home/Banner.astro";
import PropertySearchBar from "../components/General/PropertySearchBar";
import Home1 from "../assets/images/home_1.webp";
import Home2 from "../assets/images/home_2.webp";
import Home3 from "../assets/images/home_3.webp";
import SubLabel from "../components/General/SubLabel";
import SubHeader from "../components/General/SubHeader";
import SubParagraph from "../components/General/SubParagraph";
import HowCanWeHelp from "../components/Home/HowCanWeHelp";
import Video from "../components/General/Video";
import RecentlySoldLet from "../components/Home/RecentlySoldLet";
import Thumbnail from "../assets/images/thumbnail.webp";
import BrochureForm from "../components/Home/BrochureForm";
import Reviews from "../components/Home/Reviews";
import FAQs from "../components/Home/FAQs";
---

<Layout title="Welcome to Jacobs Properties.">
  <HomeHeader client:load />
  <main>
    <Banner />
    <section class="hidden justify-center bg-primary-200 py-36 md:flex">
      <div class="flex max-w-container-lg flex-col items-center gap-16">
        <h3
          class="max-w-lg text-center text-5xl font-semibold text-primary-100 lg:max-w-none"
        >
          Your property search starts here.
        </h3>
        <PropertySearchBar client:visible />
      </div>
    </section>

    <section class="bg-white pt-4 pb-14 md:py-section">
      <div class="mx-auto grid max-w-container-lg gap-12 md:grid-cols-2">
        <img
          loading="lazy"
          class="aspect-square h-auto w-full justify-self-end rounded-xl object-cover md:order-1 md:aspect-rect-sm md:max-w-2xl"
          src={Home1.src}
          alt="St Michael's Church Basingstoke"
        />
        <div class="flex flex-col gap-3 md:max-w-md md:justify-center lg:gap-8">
          <SubLabel text="About" classes="md:text-primary-300" />
          <SubHeader text="People first. Property second" />
          <SubParagraph
            text="Meet Team Jacobs. We're a friendly bunch of property experts who put people first. Since 1999, we've been helping the people of Basingstoke get on the property ladder, find their forever home, sell up and move on, downsize, upsize, rightsize - whatever your property needs we've got your back."
          />
          <Link
            classes="hidden md:flex"
            text="Meet the Team"
            link="/"
            type="secondary"
            size="md"
          />
        </div>
      </div>
    </section>

    <section class="overflow-hidden bg-primary-200 py-14 md:py-section">
      <div class="mx-auto max-w-container-lg">
        <HowCanWeHelp client:idle />
      </div>
    </section>
    <section class="bg-white py-14 md:py-section">
      <div
        id="targetTake"
        class="mx-auto flex h-auto max-w-container-lg flex-col gap-8 md:items-center md:gap-16"
      >
        <SubHeader
          classes="max-w-[17rem] sm:max-w-none"
          text="Let's put some faces to our names"
        />
        <Video
          videoId="dQw4w9WgXcQ"
          thumbnailPath={Thumbnail.src}
          origin={Astro.url}
          client:visible
        />
      </div>
    </section>

    <section
      class="relative flex flex-col gap-8 bg-secondary-100 pb-14 md:flex-row md:gap-0 md:pb-0"
    >
      <img
        loading="lazy"
        class="aspect-5/4 h-auto w-full flex-1 object-cover object-left md:order-1 md:w-[50vw]"
        src={Home2.src}
        alt=""
      />
      <div id="targetGive" class="flex max-w-container-lg flex-1 gap-8">
        <div
          class="flex flex-1 flex-col gap-3 pr-3 md:max-w-md md:justify-center lg:gap-8"
        >
          <SubLabel text="Valuation" />
          <SubHeader text="Find out how much your property is worth" />
          <SubParagraph
            text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam dolor lorem, eleifend pharetra nibh ut, blandit placerat massa. Mauris maximus ligula placerat ligula viverra gravida. Cras sed neque vitae tortor varius accumsan. Nunc accumsan ex in commodo viverra."
          />
          <div class="flex flex-col gap-3 md:flex-row">
            <Link text="Instant Valuation" link="/" type="white" size="md" />
            <Link text="Expert Valuation" link="/" type="primary" size="md" />
          </div>
        </div>
      </div>
    </section>

    <section class="overflow-hidden bg-white py-14 md:py-section">
      <div class="mx-auto max-w-container-lg">
        <RecentlySoldLet client:idle />
      </div>
    </section>

    <section
      class="relative flex flex-col gap-8 bg-primary-200 pb-14 md:flex-row md:gap-0 md:py-section"
    >
      <img
        loading="lazy"
        class="aspect-5/4 h-auto w-full flex-1 object-cover object-left md:order-1 md:hidden md:w-[50vw]"
        src={Home3.src}
        alt=""
      />
      <div class="mx-auto grid max-w-container-lg gap-8 md:grid-cols-2">
        <div class="flex flex-col gap-3 pr-3 md:max-w-lg md:justify-center">
          <SubLabel text="Sales Brochure" />
          <SubHeader text="First time selling a property?" />
          <SubParagraph
            text="We understand how daunting it can be. That's why we've compiled a FREE guide of pro tips to help make your experience as stress-free as possible."
          />
          <BrochureForm client:visible />
        </div>
        <img
          loading="lazy"
          class="hidden aspect-[1.42_/_1] h-auto w-full max-w-2xl flex-1 self-center rounded-xl object-cover object-left md:order-1 md:inline"
          src={Home3.src}
          alt=""
        />
      </div>
    </section>

    <section class="bg-white py-14 md:items-center md:gap-16 md:py-section">
      <div class="mx-auto flex max-w-container-lg flex-col gap-8 md:gap-16">
        <SubHeader text="Hear from our customers" />
        <Reviews client:visible />
      </div>
    </section>

    <section
      class="bg-primary-200 py-14 md:items-center md:gap-16 md:py-section"
    >
      <div
        class="mx-auto flex max-w-container-lg flex-col gap-8 md:justify-center md:gap-16"
      >
        <SubHeader text="Frequently asked questions" classes="md:text-center" />
        <FAQs client:visible />
      </div>
    </section>
  </main>
</Layout>

<script>
  const updateMargin = () => {
    const divToTake = document.querySelector("#targetTake");
    const divMargin = window.getComputedStyle(divToTake!);
    updateDiv(divMargin.marginLeft);
  };

  const updateDiv = (divMargin: string) => {
    (<HTMLElement>document.querySelector("#targetGive")).style.marginLeft =
      divMargin;
  };

  updateMargin();
  window.addEventListener("resize", updateMargin);
</script>
